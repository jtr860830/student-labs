<!doctype html>

<body>
    <form id="registerForm">
        <input id="userid" placeholder="user" required>
        <input id="name" placeholder="name" required>
        <input id="email" type="email" required>
        <input id="password" type="password" required>
        <button type="submit">送出</button>
    </form>

    <script>
        const API_BASE = 'http://157.230.41.208:5002/api';

        document.getElementById('registerForm')
            .addEventListener('submit', async (e) => {
                e.preventDefault();                                   // 關鍵 ①

                try {
                    const res = await fetch(`${API_BASE}/register`, {   // 關鍵 ②
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            username: userid.value,
                            name: name.value,
                            email: email.value,
                            password: password.value
                        })
                    });

                    if (!res.ok) throw new Error(res.status);
                    alert('OK');
                } catch (err) {
                    alert('ERR ' + err);
                }
            });
    </script>
</body>